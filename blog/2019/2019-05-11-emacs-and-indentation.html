<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <title>Venkat Mandela - Emacs and Indentation</title>
      <link rel="stylesheet" type="text/css" href="../../css/bootstrap-4.3.1.min.css" />
      <!-- -
	   <link rel="stylesheet" type="text/css" href="/css/docs.min.css" />
	   <link rel="stylesheet" type="text/css" href="/css/custom.css" />
	   -->
	   <link rel="icon" type="image/x-icon" href="../../favicon.ico" />
	   <link rel="stylesheet" type="text/css" href="../../css/syntax.css" />
	   <meta name="google-site-verification" content="kMqcfvgZIKvYt2C0lIY9JpfxF2PvmAcIZA6QwBM8t6A" />
    </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark"> <!--Navbar container -->
	<a class="navbar-brand" href="../../">Venkat Mandela</a>
	<div class="navmenu">
	  <ul>
	    <li><a href="../../">Home</a></li>
	    <li><a href="../../about.html">About</a></li>
	  </ul>
	</div>
    </nav><!--Navbar container -->

    <div class="container">
      <h1>Emacs and Indentation</h1>
      <div class="info">
    Posted on May 11, 2019
    
</div>

<div class="container">


<div class="row">
<div class="col-md-8">
<p>Though I have been using emacs for few years now, I faced issues with controlling the indentation. Consider the below setting in vim to configure the indentation for all source files in a directory.</p>
<ul>
<li>Use tabs for indentation</li>
<li>Treat tab width as 8 spaces</li>
</ul>
<pre><code>au BufEnter /code/kernel/*/*.[ch] setlocal tabstop=8 shiftwidth=8 noexpandtab</code></pre>
<p>I tried <a href="https://github.com/jscheid/dtrt-indent">dtrt-indent</a> which automatically configures indentation based on existing indentation in the file. This approach works well for existing source files but does not configure indentation for new source files.</p>
<p>I settled on replicating the vim behaviour exactly by using <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html#Directory-Variables">per directory local variables</a>.</p>
<pre><code>(dir-locals-set-class-variables
 'kernel-src-directory
 '(
   (c-mode . (
	      (c-basic-offset . 8)
	      (evil-shift-width . 8)
	      (indent-tabs-mode . t)
	      )
	   )
   )
 )
(dir-locals-set-directory-class
    &quot;/code/kernel&quot; 'kernel-src-directory)</code></pre>
</div>

</div>
</div>


    </div><!-- /.container -->
    <div id="footer" class="container cols-md-8">
      <hr />
      Site generated by
      <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
      Styled using <a href="http://getbootstrap.com/">Bootstrap</a>.
    </div>
      <script src="../../js/jquery-3.4.1.min.js"></script>
  <script src="../../js/bootstrap-4.3.1.bundle.min.js"></script>
  <script src="../../js/apply-styles.js"> </script>
  <script src="../../js/masonry.pkgd.min.js"></script>
</div>
</body>
</html>
