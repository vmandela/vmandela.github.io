<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Venkat Mandela - Emacs and Indentation</title>
        <link rel="stylesheet" href="../../css/bulma-0.7.5.min.css">
	<link rel="icon" type="image/x-icon" href="../../favicon.ico" />
	<meta name="google-site-verification" content="kMqcfvgZIKvYt2C0lIY9JpfxF2PvmAcIZA6QwBM8t6A" />
    </head>
    <body>
        <div class="container">
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a class="navbar-item" href="../../">Venkat Mandela</a>
                <!-- navbar items, navbar burger... -->
            </div>

            <div class="navbar-menu">
                <div class="navbar-start">
                    <a class="navbar-item" href="../../">Home</a>
                    <a class="navbar-item" href="../../about.html">About</a>
                </div>
            </div>
        </nav>
            <h1 class="title"> Emacs and Indentation </h1>
            <div class="info">
    Posted on May 11, 2019
    
</div>

<div class="container">
<div class="columns">
<div class="column content is-10">
<p>Though I have been using emacs for few years now, I faced issues with controlling the indentation. Consider the below setting in vim to configure the indentation for all source files in a directory.</p>
<ul>
<li>Use tabs for indentation</li>
<li>Treat tab width as 8 spaces</li>
</ul>
<pre><code>au BufEnter /code/kernel/*/*.[ch] setlocal tabstop=8 shiftwidth=8 noexpandtab</code></pre>
<p>I tried <a href="https://github.com/jscheid/dtrt-indent">dtrt-indent</a> which automatically configures indentation based on existing indentation in the file. This approach works well for existing source files but does not configure indentation for new source files.</p>
<p>I settled on replicating the vim behaviour exactly by using <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html#Directory-Variables">per directory local variables</a>.</p>
<pre><code>(dir-locals-set-class-variables
 'kernel-src-directory
 '(
   (c-mode . (
	      (c-basic-offset . 8)
	      (evil-shift-width . 8)
	      (indent-tabs-mode . t)
	      )
	   )
   )
 )
(dir-locals-set-directory-class
    &quot;/code/kernel&quot; 'kernel-src-directory)</code></pre>
</div>

</div>
</div>


            <div id="footer">
                <div class="has-text-centered">
                    Site generated by
                    <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
                    Styled using <a href="http://bulma.io/">Bulma</a>.
                </div>
            </div>
        </div>
        <style>
         .sidebar {
             position: sticky;
             top: 10px;
         }
        </style>
        <script src="../../js/jquery-3.4.1.min.js"></script>
        <script src="../../js/apply-styles.js"></script>
        <script src="../../js/anchor-4.2.0.min.js"></script>
    </body>
</html>
